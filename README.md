# Pentest
Information Gathering

## DNS.md
## DNS enumeration 
DNS enumeration is the process of locating all the DNS servers and their corresponding records for an organization. A company may have both internal and external DNS servers that can yield information such as usernames, computer names, and IP addresses of potential target systems. There are a lot of tools that can be used to gain information for performing DNS enumeration. The examples of tool that can be used for DNS enumeration are NSlookup, DNSstuff, American Registry for Internet Numbers (ARIN), and Whois. To enumerate DNS, you must have understanding about DNS and how it works.

You must have knowledge about DNS records. The list of DNS record provides an overview of types of resource records (database records) stored in the zone files of the Domain Name System (DNS). The DNS implements a distributed, hierarchical, and redundant database for information associated with Internet domain names and addresses. In these domain servers, different record types are used for different purposes. The following list describes the common DNS record types and their use:

|**DNS Record types**|methods|description|
|:-----------------------|:----------|:--------------|
|dns query|A|***Address record***, Returns a 32-bit IPv4 address, most commonly used to map hostnames to an IP address of the host, but it is also used for DNSBLs, storing subnet masks in RFC 1101, etc.|
|dns query|CNAME|***Canonical name record***, Alias of one name to another: the DNS lookup will continue by retrying the lookup with the new name.|
|dns query|AAAA|***IPv6 address record***, Returns a 128-bit IPv6 address, most commonly used to map hostnames to an IP address of the host.|
|dns query|MX|***Mail exchange record***, Maps a domain name to a list of message transfer agents for that domain|
|dns query|NS|***Name server record***, Delegates a DNS zone to use the given authoritative name servers|
|dns query|SOA|***zone of authority record***, Specifies authoritative information about a DNS zone, including the primary name server, the email of the domain administrator, the domain serial number, and several timers relating to refreshing the zone.|
|dns query|SPF|***Sender Policy Framework***, a simple email-validation system designed to detect email spoofing by providing a mechanism to allow receiving mail exchangers to check that incoming mail from a domain comes from a host authorized by that domain's administrators.|
|dns query|TXT|***Text record***, Originally for arbitrary human-readable text in a DNS record.|
|dns query|PTR|***Pointer record***, Pointer to a canonical name. Unlike a CNAME, DNS processing stops and just the name is returned. The most common use is for implementing reverse DNS lookups, but other uses include such things as DNS-SD.|
|dns query|SRV|***Service locator***, Generalized service location record, used for newer protocols instead of creating protocol-specific records such as MX.|
|dns query|NSEC|***Next Secure record***, Part of DNSSEC—used to prove a name does not exist. Uses the same format as the (obsolete) NXT record.|
|dns query|AXFR|***Authoritative Zone Transfer***, Transfer entire zone file from the master name server to secondary name servers. **DNS Zone Transfer** is typically used to replicate DNS data across a number of DNS servers, or to back up DNS files. A user or server will perform a specific zone transfer request from a ―name server. If the name server allows zone transfers to occur, all the DNS names and IP addresses hosted by the name server will be returned in human-readable ASCII text.|
|dns query|IXFR|***Incremental Zone Transfer***, Transfer entire zone file from the master name server to secondary name servers.|
|dns query|DNS Wildcard|Check if nameserver enable wildcard query, or dns faked.|
|dns query|domain bruteforce|bruteforce subdomains with wordlists.|
|dns query|reverse bruteforce|reverse ip for domain|
|dns query|srv bruteforce|bruteforce srv records|
|dns query|gtld bruteforce|bruteforce gtld records|
|dns query|tld bruteforce|bruteforce tld records|

## Read the following documentation :

1. https://tryhackme.com/room/dnsindetail
1. https://securitytrails.com/blog/dns-enumeration
1. https://hackertarget.com/recon-ng-tutorial/
1. https://www.geeksforgeeks.org/python-theharvester-how-to-use-it/

## Exercices : 

⚠️⚠️⚠️ Please save your answers. Your coaches may ask you for a copy of all your answers at the end of the challenge. ⚠️⚠️⚠️

1. What is the ip address of adlp-corp.com ?
    > 52.51.133.160 
    > `ping adlp-corp.com`
1. What is the TXT record of adlp-corp.com? 
    > BC{DESCRIPTIVE-DOMAIN-TXT}
    > `dig -t txt aldp-corp.com` 
1. What are the MX records of becode.org ?
    > alt1.aspmx.l.google.com
    > alt2.aspmx.l.google.com
    > aspmx.l.google.com
    > alt3.aspmx.l.google.com
    > alt4.aspmx.l.google.com
    > `dig -t mx becode.org +short` 
1. What are the MX records of adlp-corp.com ?
    > alt1.aspmx.l.google.com
    > alt2.aspmx.l.google.com
    > aspmx.l.google.com
    > alt3.aspmx.l.google.com
    > alt4.aspmx.l.google.com  
    >  `dnsenum --enum adlp-corp.com` || `dnsrecon -d adlp-corp.com`
1. What is the first NS name server of adlp-corp.com?
    > ns-1185.awsdns-20.org 
    > `dnsenum --enum adlp-corp.com` || `dnsrecon -d adlp-corp.com`
1. Use a brute force tool to find subdomains of adlp-corp.com. How many did you find?
    > 5 
    > `dnsenum --enum adlp-corp.com` || `dnsrecon -d adlp-corp.com` 
1. Use theHarvester tool at becode.org. How many Linkedin Users? 
    > Zero. `[*] LinkedIn Links found: 0` Other than that, if you try to use LonkedIn as a source for the search, it will give you the error that the source is invalid. It means that LinkedIn has propably been removed as a source in the latest versions of theHArvester.
    > `theHarvester -d becode.org -l 100 -d all` 
1. Use theHarvester tool at becode.org. How many ip addresses did you find? 
    > 32 
    > `theHarvester -d becode.org -l 100 -d all` 
1. Write a small script to attempt a zone transfer from adlp-corp.com using a higher-level scripting language such as Python, Perl, or Ruby
    > https://gist.github.com/gothburz/f9805f0b10637e69dcb887d3292abee3
1.  Write a small script to attempt a brute force search for subdomains using a higher level scripting language such as Python, Perl or Ruby.

## Nmap.md 

## 1. Discover how nmap works by following this room on try hack me.

https://tryhackme.com/room/furthernmap

## 2. Connect to the vpn and use the 10.12.1.36 to answer the following questions:

⚠️⚠️⚠️ Please save your answers. Your coaches may ask you for a copy of all your answers at the end of the challenge. ⚠️⚠️⚠️

Ip : 10.12.1.36

1. How many tcp ports are open on the box? What command did you use?
    > 23
    > nmap --open -PS 10.12.1.36
    
1. How many udp ports are open on the box? What command did you use?
    > 6
    > nmap --open -sU 10.12.1.36

1. What is the version of ftp?
    > vsftpd 2.3.4
    > nmap -sV -p 21 10.12.1.36 

1. What is the version of ssh?
    > OpenSSH 4.7p1 Debian 8utuntu1 (protocol 2.0)
    > nmap -sV -p 22 10.12.1.36

1. What is the version of Apache?
    > APACHE http 2.2.8 ((Ubuntu) DAV/2)
    > nmap -sV -p 80 10.12.1.36

1. Is anonymous ftp access allowed on the box? What command did you use? (Use only nmap)
    > |_ftp-anon: Anonymous FTP login allowed (FTP code 230)
    > nmap --script=ftp-anon 10.12.1.36
    > nmap -sT -sV -sC 10.12.1.36

1. Do a SYN scan. Which command did you use?
    > nmap -sS 10.12.1.36

1. Do a scan that bypasses a firewall. What command did you use?
    > nmap -f 10.12.1.36 

1. Run a scan with the default NSE scripts. Which flag do you use?
    > nmap -sC 10.12.1.36

1. What service occupies port 8180?
    > Apache Tomcat/Coyote JSP engine 1.1
    > nmap -sV -p 8180 10.12.1.36  

1. What is the salt of the mysql service?
    > 8z#97E9+jUJTHL%r2?%9

1. What is the domain name?
    > localdomain
    > nmap -sV -sC 10.12.1.36 | grep domain
    > Or look for "smb-os-discovery"

1. What is the FQDN of the box? 
    > metasploitable.localdomain
    > Same scan as the previous, look for "smb-os-discovery". 

1. What is the os version? 
    > Unix (Samba 3.0.20-Debian)
    > Same scan as the previous, look for "smb-os-discovery".

1. What is the version of Samba?
    > Samba 3.0.20-Debian

1. Wat is the name of the box?
    > Metasploitable

1. Do a scan on the subnet 10.xx.1.0/24. How many IP addresses respond?  What command did you use?
   Charleroi : 10.11.0.1/24
   Bruxelles : 10.12.0.1/24
   Ghent : 10.13.0.1/24
    > If you run `nmap -sL -n 10.11.0.1/24` all 256 IP addresses from that range will be scanned. If you run `nmap -sS 10.1x.0.1/24` it will return 1 host is up from the 256 IP addresses scanned. Therefore, there's 1 host up for each range.
    > We can also test the range the metasploitable box is in: `nmap -sS 10.12.1.0/24` > This will give us 6 IP addresses.

1. Do the same thing but with the top port option at 10. What command did you use?
    > nmap --top-ports 10 10.1x.0.1/24
